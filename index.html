<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body class="bg-gray-50 min-h-screen p-4">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow p-6">
        <h1 class="text-3xl font-bold text-center mb-8">Expense Tracker</h1>
        
        <!-- Input Form -->
        <div class="flex flex-wrap gap-4 mb-8">
            <input type="text" id="expenseName" placeholder="Expense Name" class="flex-1 min-w-[200px] p-2 border rounded">
            <input type="number" id="amount" placeholder="Amount" class="flex-1 min-w-[150px] p-2 border rounded">
            <select id="category" class="flex-1 min-w-[150px] p-2 border rounded">
                <option value="">Select Category</option>
                <option value="Food">Food</option>
                <option value="Transport">Transport</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Bills">Bills</option>
                <option value="Others">Others</option>
            </select>
            <input type="date" id="date" class="flex-1 min-w-[150px] p-2 border rounded">
            <button onclick="addExpense()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Add Expense</button>
        </div>

        <!-- Expense Table -->
        <div class="overflow-x-auto">
            <table class="w-full mb-4">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="p-3 text-left">Expense Name</th>
                        <th class="p-3 text-left">Amount</th>
                        <th class="p-3 text-left">Category</th>
                        <th class="p-3 text-left">Date</th>
                        <th class="p-3 text-left">Action</th>
                    </tr>
                </thead>
                <tbody id="expenseList"></tbody>
            </table>
        </div>

        <!-- Footer -->
        <div class="flex flex-wrap justify-between items-center mt-4">
            <div class="flex items-center gap-2">
                <span>Filter by Category:</span>
                <select id="filterCategory" onchange="filterExpenses()" class="p-2 border rounded">
                    <option value="All">All</option>
                    <option value="Food">Food</option>
                    <option value="Transport">Transport</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Bills">Bills</option>
                    <option value="Others">Others</option>
                </select>
            </div>
            <div class="font-bold text-xl">
                Total: $<span id="total">0.00</span>
            </div>
        </div>
    </div>

    <script>
        let expenses = [];
        let editingId = null;

        function addExpense() {
            const name = document.getElementById('expenseName').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const category = document.getElementById('category').value;
            const date = document.getElementById('date').value;

            if (!name || !amount || !category || !date) {
                alert('Please fill all fields');
                return;
            }

            if (editingId !== null) {
                expenses = expenses.map(exp => 
                    exp.id === editingId ? 
                    {...exp, name, amount, category, date} : 
                    exp
                );
                editingId = null;
            } else {
                expenses.push({
                    id: Date.now(),
                    name,
                    amount,
                    category,
                    date
                });
            }

            clearForm();
            updateDisplay();
            saveToLocalStorage();
        }

        function editExpense(id) {
            const expense = expenses.find(exp => exp.id === id);
            if (expense) {
                document.getElementById('expenseName').value = expense.name;
                document.getElementById('amount').value = expense.amount;
                document.getElementById('category').value = expense.category;
                document.getElementById('date').value = expense.date;
                editingId = id;
            }
        }

        function deleteExpense(id) {
            if (confirm('Are you sure you want to delete this expense?')) {
                expenses = expenses.filter(exp => exp.id !== id);
                updateDisplay();
                saveToLocalStorage();
            }
        }

        function filterExpenses() {
            updateDisplay();
        }

        function updateDisplay() {
            const tbody = document.getElementById('expenseList');
            const filterCategory = document.getElementById('filterCategory').value;
            
            let filteredExpenses = expenses;
            if (filterCategory !== 'All') {
                filteredExpenses = expenses.filter(exp => exp.category === filterCategory);
            }

            tbody.innerHTML = filteredExpenses.map(expense => `
                <tr class="border-b">
                    <td class="p-3">${expense.name}</td>
                    <td class="p-3">$${expense.amount.toFixed(2)}</td>
                    <td class="p-3">${expense.category}</td>
                    <td class="p-3">${expense.date}</td>
                    <td class="p-3">
                        <button onclick="editExpense(${expense.id})" class="text-blue-600 hover:text-blue-800 mr-2">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button onclick="deleteExpense(${expense.id})" class="text-red-600 hover:text-red-800">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');

            const total = filteredExpenses.reduce((sum, exp) => sum + exp.amount, 0);
            document.getElementById('total').textContent = total.toFixed(2);
        }

        function clearForm() {
            document.getElementById('expenseName').value = '';
            document.getElementById('amount').value = '';
            document.getElementById('category').value = '';
            document.getElementById('date').value = '';
            editingId = null;
        }

        function saveToLocalStorage() {
            localStorage.setItem('expenses', JSON.stringify(expenses));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('expenses');
            if (saved) {
                expenses = JSON.parse(saved);
                updateDisplay();
            }
        }

        // Initialize
        loadFromLocalStorage();
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>